<app-shared-modal id="addemployee" formName="addForm" modaltTitle="Add Employee" [child]="this" #addemployee
    [modalConfig]="modalConfig.addModalConfig" (newConfirmationEvent)="addEmployee()">

    <div class="container my-3">
        <form id="addForm" #form="ngForm">
            <div class="form-group mb-3">
                <label for="name">Name</label>
                <input type="text" aria-required="\S" title="This field is required" class="form-control" id="name"
                    name="name" [(ngModel)]="addEmployeeRequest.name" [ngModelOptions]="{standalone: true}"
                    placeholder="Name">
            </div>
            <div class="form-group mb-3">
                <label for="surname">Surname</label>
                <input type="text" class="form-control" id="surname" surname="surname"
                    [(ngModel)]="addEmployeeRequest.surname" [ngModelOptions]="{standalone: true}"
                    placeholder="Surname">
            </div>
            <div class="form-group mb-3">
                <label for="position">Position</label>
                <select class="form-select form-select-md mb-3" aria-label=".form-select-lg example" id="position"
                    position="position" [(ngModel)]="addEmployeeRequest.positionId"
                    [ngModelOptions]="{standalone: true}">
                    <option value=null selected>--Select Position--</option>
                    <option *ngFor="let postion of allpositions" value={{postion.id}}>{{postion?.name}}</option>
                </select>
            </div>

            <div class="form-group mb-3">
                <label for="department">Departments</label>
                <ng-multiselect-dropdown id="department" [placeholder]="'--Select Departments--'"
                    [settings]="dropdownSettings" [data]="alldepartments"
                    [(ngModel)]="addEmployeeRequest.employeeDepartments" [ngModelOptions]="{standalone: true}">
                </ng-multiselect-dropdown>

            </div>

            <div class="form-group mb-3">
                <label for="manager">Manager</label>
                <select class="form-select form-select-md mb-3" aria-label=".form-select-lg example" id="manager"
                    manager="manager" [(ngModel)]="addEmployeeRequest.managerId" [ngModelOptions]="{standalone: true}">
                    <option value=null selected>--Select Manager--</option>
                    <option *ngFor="let manager of employees" value={{manager.id}}>{{manager?.name}}</option>
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="birthdate">Birth Date</label>
                <input class="form-control" birthdate="birthdate" [(ngModel)]="addEmployeeRequest.birthDate"
                    [ngModelOptions]="{standalone: true}" type="date" id="birthdate">
            </div>
        </form>
    </div>


</app-shared-modal>

<app-shared-modal #getemployeeMangers [modalConfig]="modalConfig.employeeMangersModalConfig"
    [modaltTitle]="modalTitle+ '\'s' +' ' + 'Managers'">
    <div class="container my" style="max-width: 1500px;">
        <table class="table table-bordered table-lg">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Managing Level</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let manager of employeeManagers">
                    <td>{{manager.id}}</td>
                    <td style="color: black;">{{manager.name}}</td>
                    <td>{{manager.surname}}</td>
                    <td>{{manager.managingLevel}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</app-shared-modal>

<app-shared-modal #getMangerEmployee [modalConfig]="modalConfig.managersEmployeeModalConfig"
    [modaltTitle]="modalTitle+ '\'s' +' ' + 'Employees'">
    <div class="container my" style="max-width: 1500px;">
        <table class="table table-bordered table-lg">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Surname</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let employee of managerEmployees">
                    <td>{{employee.id}}</td>
                    <td style="color: black;">{{employee.name}}</td>
                    <td>{{employee.surname}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</app-shared-modal>

<app-shared-modal #editemployee modaltTitle="Edit Employee" [modalConfig]="modalConfig.editModalConfig"
    (newConfirmationEvent)="editEmployee()">
    <div class="container my-3">
        <form #form="ngForm">
            <div class="form-group mb-3">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" name="name" [(ngModel)]="updateEmployee.name"
                    [ngModelOptions]="{standalone: true}" placeholder="Name">
            </div>
            <div class="form-group mb-3">
                <label for="surname">Surname</label>
                <input type="text" class="form-control" id="surname" surname="surname"
                    [(ngModel)]="updateEmployee.surname" [ngModelOptions]="{standalone: true}" placeholder="Surname">
            </div>

            <div class="form-group mb-3">
                <label for="position">Positions</label>
                <ng-select id="position" class="custom" [items]="allpositions" bindLabel="name" bindValue="id"
                    [(ngModel)]="updateEmployee.positionId" [ngModelOptions]="{standalone: true}">
                </ng-select>
            </div>

            <div class="form-group mb-3">
                <label for="department">Departments</label>
                <ng-multiselect-dropdown id="department" [placeholder]="'--Select Department--'"
                    [settings]="dropdownSettings" [data]="alldepartments" [(ngModel)]="updateEmployee.departments"
                    [ngModelOptions]="{standalone: true}">
                </ng-multiselect-dropdown>

            </div>

            <div class="form-group mb-3">
                <label for="manager">Manager</label>
                <div class="form-group mb-3">
                    <ng-select id="manager" class="custom" [items]="employees" bindLabel="name" bindValue="id"
                        (click)="Onselect(updateEmployee.managerId)" [(ngModel)]="updateEmployee.managerId"
                        [ngModelOptions]="{standalone: true}">
                    </ng-select>
                </div>
                <small class="text-danger" *ngIf="isManagerValid">*Employee can't be a assaign to his manager</small>

            </div>

            <div class="form-group mb-3">
                <label for="birthdate">Birth Date</label>
                <input class="form-control" name="birthdate" [(ngModel)]="updateEmployee.birthDate "
                    [ngModelOptions]="{standalone: true}" type="date" id="birthdate">
            </div>
        </form>
    </div>
</app-shared-modal>

<app-shared-modal #deleteemployee modaltTitle="Delete Employee" [modalConfig]="modalConfig.deleteModalConfig"
    (newConfirmationEvent)="deleteEmployee()">
    <p class="text-danger">Are you sure to delete ?</p>
</app-shared-modal>